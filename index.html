<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geometry Dash Clone</title>
<style>
  body { margin:0; padding:0; display:flex; flex-direction:column; align-items:center; font-family:Arial; background:#1e1e1e; color:white;}
  canvas { background:#222; display:block; margin:0 auto; }
  #menu, #restartScreen { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; }
  button { padding:10px 20px; font-size:18px; margin:5px; cursor:pointer; border:none; border-radius:5px; background:#ff4136; color:white; }
</style>
</head>
<body>

<!-- Меню -->
<div id="menu">
  <h1>Geometry Dash Clone</h1>
  <button id="playBtn">Play</button>
  <button id="shopBtn">Shop</button>
  <button id="onlineBtn">Online (скоро)</button>
</div>

<!-- Канвас игры -->
<canvas id="gameCanvas" width="800" height="400" style="display:none;"></canvas>

<!-- Экран рестарта -->
<div id="restartScreen" style="display:none;">
  <h2>Вы проиграли!</h2>
  <button id="restartBtn">Restart</button>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const menu = document.getElementById('menu');
const restartScreen = document.getElementById('restartScreen');
const playBtn = document.getElementById('playBtn');
const restartBtn = document.getElementById('restartBtn');

// Игровые параметры
let cube = {x:50, y:300, size:30, vy:0, jump: -12};
let gravity = 0.6;
let obstacles = [];
let speed = 5;
let maxSpeed = 15;
let level = 1;
let score = 0;
let gameOver = false;

// Создание препятствий
function createObstacle(){
    let height = Math.random()*100+20;
    obstacles.push({x:canvas.width, y:canvas.height-height, width:30, height:height});
}

// Игра
function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // кубик
    cube.vy += gravity;
    cube.y += cube.vy;
    if(cube.y > canvas.height-cube.size){
        cube.y = canvas.height-cube.size;
        cube.vy = 0;
    }
    ctx.fillStyle="red";
    ctx.fillRect(cube.x, cube.y, cube.size, cube.size);

    // препятствия
    for(let i=0;i<obstacles.length;i++){
        obstacles[i].x -= speed;
        ctx.fillStyle="green";
        ctx.fillRect(obstacles[i].x, obstacles[i].y, obstacles[i].width, obstacles[i].height);

        // проверка столкновения
        if(cube.x < obstacles[i].x + obstacles[i].width &&
           cube.x + cube.size > obstacles[i].x &&
           cube.y < obstacles[i].y + obstacles[i].height &&
           cube.y + cube.size > obstacles[i].y){
            gameOver = true;
        }
    }

    // удаляем препятствия за экраном
    obstacles = obstacles.filter(obs => obs.x + obs.width > 0);

    // создаем новые препятствия
    if(Math.random()<0.02) createObstacle();

    if(gameOver){
        canvas.style.display="none";
        restartScreen.style.display="flex";
    } else {
        requestAnimationFrame(gameLoop);
    }
}

// Прыжок по клику или тапу
function jump(){
    if(cube.y >= canvas.height-cube.size){
        cube.vy = cube.jump;
    }
}

// Обновление скорости и уровня
function nextLevel(){
    level++;
    speed += 0.5;
    if(speed>maxSpeed) speed = maxSpeed;
}

// Кнопки
playBtn.onclick = ()=>{
    menu.style.display="none";
    canvas.style.display="block";
    cube.y = 300; cube.vy=0;
    obstacles = [];
    speed = 5; level=1; gameOver=false;
    gameLoop();
}

restartBtn.onclick = ()=>{
    restartScreen.style.display="none";
    canvas.style.display="block";
    cube.y = 300; cube.vy=0;
    obstacles = [];
    speed = 5; level=1; gameOver=false;
    gameLoop();
}

// Клик/тап для прыжка
canvas.addEventListener('click', jump);
document.addEventListener('keydown',(e)=>{if(e.code==='Space') jump();});

</script>
</body>
</html>
